from xml_tools import fragparse
from common_XPath import QUESTION_MININT, QUESTION_TYPE_QUESTION, QUESTION_MINATTRIB, QUESTION_NUMERO
from file_loader import get_src_file_path, get_out_file_name
from lxml import etree

select_qe = {
"1808", "1810", "1849", "2321", "2558", "2875", "3523", "4935", "5056", "5545", "5545", "5606", "5994", "6172", "7526", "8274", "8845", "9331",
"9606", "10132", "10133", "11576", "12194", "12195", "12505", "12769", "12770", "12784", "12784", "12885", "12886", "14157", "15093", "16025",
"16837", "16993", "17164", "17398", "17462", "17462", "17744", "17745", "18462", "19207", "19979", "20065", "20065", "20213", "20936", "23159",
"23557", "23805", "23932", "25325", "25914", "25915", "27105", "27214", "27924", "27928", "28824", "28824", "29303", "29328", "30336", "31390",
"31391", "31393", "31394", "31828", "32407", "32997", "33019", "33852", "35633", "35651", "35661", "35714", "36703", "36705", "37148", "37703",
"37808", "37808", "38264", "39170", "39170", "39483", "39549", "39772", "40256", "40624", "40838", "41684", "41938", "42578", "43190", "43191",
"43193", "43194", "44317", "44318", "45067", "45920", "45978", "46178", "46572", "46573", "46578", "47236", "47781", "47941", "47942", "48293",
"48755", "48757", "48775", "48776", "48777", "49396", "50051", "50415", "51402", "51405", "51670", "51901", "52711", "52926", "54128", "54455",
"54635", "54803", "55972", "56400", "56786", "56787", "56844", "56845", "56846", "57258", "57769", "58262", "59109", "60411", "60412", "61571",
"62305", "62324", "63108", "63109", "63151", "63549", "63854", "64342", "64621", "64622", "65413", "66649", "68254", "68508", "68566", "68985",
"68988", "69013", "69527", "69529", "70111", "70141", "70358", "70603", "70656", "70657", "70658", "70660", "71555", "71676", "72042", "72168",
"73017", "73343", "73344", "73521", "73863", "74355", "74357", "74366", "74891", "74894", "76233", "76844", "77282", "78704", "80161", "80285",
"80688", "81283", "81836", "82539", "84016", "84025", "85274", "85276", "86660", "86943", "87998", "88462", "88497", "89157", "89384", "89589",
"89592", "90048", "90049", "90253", "90464", "90586", "90849", "91054", "91267", "91548", "92182", "92258", "92648", "92927", "92946", "92947",
"93355", "94150", "94263", "94831", "96123", "96902", "96903", "96904", "97201", "97313", "97481", "97534", "98081", "98644", "98931", "99026",
"99148", "99262", "100261", "101361", "101362", "101870", "103071", "128034", "128514", "128538", "128996", "129122", "129468", "129509", "129510",
"130093", "130703", "131390", "131920", "131921", "132313", "100408", "100410", "101078", "102076", "103949", "105848", "106043", "107605", "107708",
"108120", "108308", "108309", "108310", "111283", "111289", "111861", "112895", "112896", "112984", "112986", "112987", "113605", "113664", "115052",
"115729", "115730", "116324", "116325", "116326", "116327", "116329", "116884", "118423", "118424", "118425", "118848", "118851", "119784", "121386",
"122183", "123349", "124913", "125742", "125748", "126980", "127550", "128008", "128513", "128963", "128995", "130063", "131086", "131389", "131661",
"132312", "1327", "1809", "1812", "18422", "18423", "18424", "18425", "1848", "2112", "24014", "24014", "26100", "27730", "27935", "28734", "28845",
"3011", "30335", "3129", "3140", "33036", "33492", "34052", "35400", "35613", "35634", "35650", "35954", "36018", "36704", "37643", "3784", "40835",
"41210", "41894", "4481", "48756", "49050", "49411", "49690", "5003", "5004", "5018", "50578", "50581", "51979", "53379", "54244", "54795", "54807",
"55249", "5548", "5549", "55929", "56788", "57338", "57503", "57507", "57851", "58260", "58261", "58358", "58655", "59747", "59750", "59750", "59756",
"60139", "61061", "6239", "62457", "62841", "62841", "62895", "63154", "63509", "64211", "64211", "64989", "65606", "65629", "66064", "66463",
"66466", "66466", "66650", "66774", "66929", "66954", "67134", "67135", "67136", "68987", "69528", "70047", "70048", "70109", "70109", "70139",
"70277", "70602", "70659", "71044", "71078", "71079", "71230", "71556", "71584", "71585", "72537", "7384", "74331", "74841", "74866", "75268",
"75269", "75455", "76144", "76239", "76601", "76846", "77255", "77279", "78158", "78364", "78365", "78717", "79030", "79417", "79661", "80082",
"80684", "80689", "80708", "81282", "81295", "81381", "81674", "82875", "84242", "84331", "84685", "84686", "84689", "84885", "85384", "85386",
"86476", "87004", "87303", "87657", "87694", "87919", "8852", "88533", "88621", "89192", "89615", "90267", "90268", "91466", "92064", "92065",
"92067", "92681", "92683", "94236", "94812", "94813", "94814", "97309", "97314", "97672", "98187", "99311", "99312", "99313", "99783", "99827",
"99950"}


if __name__ == "__main__":
    questions14_fn = get_src_file_path('Questions_ecrites_XIV.xml')
    for question in fragparse(questions14_fn, tags="question", callback=None, cb_data=None):
        num_question = QUESTION_NUMERO(question)[0]
        if num_question in select_qe:
            # print(etree.tostring(item))
            print(num_question)
            with open(get_out_file_name(num_question+'.xml', "questions"), 'wb') as of:
                etree.ElementTree(question).write(of)
            select_qe.remove(num_question)
    print("remaining:")
    print(len(select_qe))
    print(select_qe)
